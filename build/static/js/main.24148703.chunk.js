(this.webpackJsonpproject1=this.webpackJsonpproject1||[]).push([[0],{177:function(e,t,c){},192:function(e,t){},194:function(e,t){},205:function(e,t){},207:function(e,t){},234:function(e,t){},236:function(e,t){},237:function(e,t){},242:function(e,t){},244:function(e,t){},263:function(e,t){},275:function(e,t){},278:function(e,t){},291:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),s=c(34),r=c.n(s),i=(c(177),c(4)),o=c(28),l=(c(178),c(292),c(293),o.a.initializeApp({apiKey:"AIzaSyBJcWLVSwtWhLSbyU4M20KPekKlQNv8T_s",authDomain:"project-dev-dc145.firebaseapp.com",projectId:"project-dev-dc145",storageBucket:"project-dev-dc145.appspot.com",messagingSenderId:"938359657242",appId:"1:938359657242:web:ab126482950d0e3afb52a3"})),d=l.firestore(),j=l.storage(),u={users:d.collection("users"),links:d.collection("links")},b=l.auth(),h=c(1),O=a.a.createContext();function p(){return Object(n.useContext)(O)}function f(e){var t=e.children,c=Object(n.useState)(),a=Object(i.a)(c,2),s=a[0],r=a[1],o=Object(n.useState)(!0),l=Object(i.a)(o,2),d=l[0],j=l[1];Object(n.useEffect)((function(){return b.onAuthStateChanged((function(e){r(e),j(!1)}))}),[]);var u={currentUser:s,login:function(e,t){return b.signInWithEmailAndPassword(e,t)},signup:function(e,t){return b.createUserWithEmailAndPassword(e,t)},logout:function(){return b.signOut()},resetPassword:function(e){return b.sendPasswordResetEmail(e)},updateEmail:function(e){return s.updateEmail(e)},updatePassword:function(e){return s.updatePassword(e)}};return Object(h.jsx)(O.Provider,{value:u,children:!d&&t})}var x=c(27),m=c(16),v=c(6),g=c.n(v),w=c(15),k=c(306),N=c(298),y=c(299);c(61);var S=function(e){var t=Object(m.g)(),c=p(),n=c.currentUser,a=c.logout;function s(){return r.apply(this,arguments)}function r(){return(r=Object(w.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a();case 3:t.push("/"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("error");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}return document.getElementById("App").classList.add("closeMargin"),Object(h.jsxs)("div",{id:"mySidenav",className:"sidenav closeNav",children:[Object(h.jsxs)("div",{className:"h-flex",children:[Object(h.jsx)("svg",{className:"svg-home",viewBox:"0 0 20 20",onClick:function(){n?t.push("/home"):t.push("/")},children:Object(h.jsx)("path",{d:"M18.121,9.88l-7.832-7.836c-0.155-0.158-0.428-0.155-0.584,0L1.842,9.913c-0.262,0.263-0.073,0.705,0.292,0.705h2.069v7.042c0,0.227,0.187,0.414,0.414,0.414h3.725c0.228,0,0.414-0.188,0.414-0.414v-3.313h2.483v3.313c0,0.227,0.187,0.414,0.413,0.414h3.726c0.229,0,0.414-0.188,0.414-0.414v-7.042h2.068h0.004C18.331,10.617,18.389,10.146,18.121,9.88 M14.963,17.245h-2.896v-3.313c0-0.229-0.186-0.415-0.414-0.415H8.342c-0.228,0-0.414,0.187-0.414,0.415v3.313H5.032v-6.628h9.931V17.245z M3.133,9.79l6.864-6.868l6.867,6.868H3.133z"})}),Object(h.jsx)("a",{href:n?"/home":"/",children:"Home"})]}),n&&Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{className:"h-flex",children:[Object(h.jsx)("svg",{className:"svg-files",viewBox:"0 0 20 20",onClick:function(){t.push("/files")},children:Object(h.jsx)("path",{d:"M17.927,5.828h-4.41l-1.929-1.961c-0.078-0.079-0.186-0.125-0.297-0.125H4.159c-0.229,0-0.417,0.188-0.417,0.417v1.669H2.073c-0.229,0-0.417,0.188-0.417,0.417v9.596c0,0.229,0.188,0.417,0.417,0.417h15.854c0.229,0,0.417-0.188,0.417-0.417V6.245C18.344,6.016,18.156,5.828,17.927,5.828 M4.577,4.577h6.539l1.231,1.251h-7.77V4.577z M17.51,15.424H2.491V6.663H17.51V15.424z"})}),Object(h.jsx)("a",{href:"/files",children:"My Files"})]})}),n&&Object(h.jsxs)("div",{className:"h-flex",children:[Object(h.jsxs)("svg",{onClick:s,className:"svg-logout",viewBox:"-110 -90 550 550",children:[Object(h.jsx)("path",{d:"M180.455,360.91H24.061V24.061h156.394c6.641,0,12.03-5.39,12.03-12.03s-5.39-12.03-12.03-12.03H12.03 C5.39,0.001,0,5.39,0,12.031V372.94c0,6.641,5.39,12.03,12.03,12.03h168.424c6.641,0,12.03-5.39,12.03-12.03\tC192.485,366.299,187.095,360.91,180.455,360.91z"})," ",Object(h.jsx)("path",{d:"M381.481,184.088l-83.009-84.2c-4.704-4.752-12.319-4.74-17.011,0c-4.704,4.74-4.704,12.439,0,17.179l62.558,63.46H96.279\tc-6.641,0-12.03,5.438-12.03,12.151c0,6.713,5.39,12.151,12.03,12.151h247.74l-62.558,63.46c-4.704,4.752-4.704,12.439,0,17.179\tc4.704,4.752,12.319,4.752,17.011,0l82.997-84.2C386.113,196.588,386.161,188.756,381.481,184.088z"})]}),Object(h.jsx)("div",{id:"logout",onClick:s,children:"Logout"})]}),Object(h.jsx)("div",{className:"h-flex",children:Object(h.jsx)("hr",{className:"navbar-divider"})}),Object(h.jsxs)("div",{className:"h-flex",children:[Object(h.jsx)("svg",{className:"svg-toggle",viewBox:"0 0 20 20",onClick:function(e){e.preventDefault(),document.getElementById("App").classList.add("openMargin"),document.getElementById("mySidenav").classList.add("openNav"),document.getElementById("App").classList.remove("closeMargin"),document.getElementById("mySidenav").classList.remove("closeNav")},children:Object(h.jsx)("path",{d:"M12.522,10.4l-3.559,3.562c-0.172,0.173-0.451,0.176-0.625,0c-0.173-0.173-0.173-0.451,0-0.624l3.248-3.25L8.161,6.662c-0.173-0.173-0.173-0.452,0-0.624c0.172-0.175,0.451-0.175,0.624,0l3.738,3.736C12.695,9.947,12.695,10.228,12.522,10.4 M18.406,10c0,4.644-3.764,8.406-8.406,8.406c-4.644,0-8.406-3.763-8.406-8.406S5.356,1.594,10,1.594C14.643,1.594,18.406,5.356,18.406,10M17.521,10c0-4.148-3.374-7.521-7.521-7.521c-4.148,0-7.521,3.374-7.521,7.521c0,4.147,3.374,7.521,7.521,7.521C14.147,17.521,17.521,14.147,17.521,10"})}),Object(h.jsx)("div",{id:"close",onClick:function(e){e.preventDefault(),document.getElementById("mySidenav").classList.add("closeNav"),document.getElementById("App").classList.add("closeMargin"),document.getElementById("App").classList.remove("openMargin"),document.getElementById("mySidenav").classList.remove("openNav")},children:"Close"})]})]})};function C(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),c=t[0],a=t[1],s=p(),r=s.currentUser,o=s.logout,l=Object(m.g)();function d(){return(d=Object(w.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(""),e.prev=1,e.next=4,o();case 4:l.push("/"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),a("Failed to log out");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(S,{}),Object(h.jsx)(k.a,{children:Object(h.jsxs)(k.a.Body,{children:[Object(h.jsx)("h2",{className:"text-center mb-4",children:"Profile"}),c&&Object(h.jsx)(N.a,{variant:"danger",children:c}),Object(h.jsx)("strong",{children:"Email:"})," ",r.email]})}),Object(h.jsx)("div",{className:"w-100 text-center mt-2",children:Object(h.jsx)(y.a,{variant:"link",onClick:function(){return d.apply(this,arguments)},children:"Log Out"})})]})}var B=c(50),F=c(172);function D(e){var t=e.component,c=Object(F.a)(e,["component"]),n=p().currentUser;return Object(h.jsx)(m.b,Object(B.a)(Object(B.a)({},c),{},{render:function(e){return n?Object(h.jsx)(t,Object(B.a)({},e)):Object(h.jsx)(m.a,{to:"/"})}}))}var M=c(300),L=c(305);function z(){var e=Object(n.useRef)(),t=p().resetPassword,c=Object(n.useState)(""),a=Object(i.a)(c,2),s=a[0],r=a[1],o=Object(n.useState)(""),l=Object(i.a)(o,2),d=l[0],j=l[1],u=Object(n.useState)(!1),b=Object(i.a)(u,2),O=b[0],f=b[1];function m(){return(m=Object(w.a)(g.a.mark((function c(n){return g.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n.preventDefault(),c.prev=1,j(""),r(""),f(!0),c.next=7,t(e.current.value);case 7:j("Check your inbox for further instructions"),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(1),r("Failed to reset password");case 13:f(!1);case 14:case"end":return c.stop()}}),c,null,[[1,10]])})))).apply(this,arguments)}return Object(h.jsx)(M.a,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh"},children:Object(h.jsxs)("div",{className:"w-100",style:{maxWidth:"400px"},children:[Object(h.jsx)(k.a,{children:Object(h.jsxs)(k.a.Body,{children:[Object(h.jsx)("h2",{className:"text-center mb-4",children:"Password Reset"}),s&&Object(h.jsx)(N.a,{variant:"danger",children:s}),d&&Object(h.jsx)(N.a,{variant:"success",children:d}),Object(h.jsxs)(L.a,{onSubmit:function(e){return m.apply(this,arguments)},children:[Object(h.jsxs)(L.a.Group,{id:"email",children:[Object(h.jsx)(L.a.Label,{children:"Email"}),Object(h.jsx)(L.a.Control,{type:"email",ref:e,required:!0})]}),Object(h.jsx)(y.a,{disabled:O,className:"w-100",type:"submit",children:"Reset Password"})]}),Object(h.jsx)("div",{className:"w-100 text-center mt-3",children:Object(h.jsx)(x.b,{to:"/login",children:"Login"})})]})}),Object(h.jsxs)("div",{className:"w-100 text-center mt-2",children:["Need an account? ",Object(h.jsx)(x.b,{to:"/signup",children:"Sign Up"})]})]})})}function E(e){var t=Object(n.useRef)(),c=Object(n.useRef)(),a=Object(n.useRef)(),s=p(),r=s.signup,o=s.currentUser,l=Object(n.useState)(""),d=Object(i.a)(l,2),j=d[0],b=d[1],O=Object(n.useState)(!1),f=Object(i.a)(O,2),x=f[0],v=f[1],k=Object(m.g)();function S(){return(S=Object(w.a)(g.a.mark((function e(n){var s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),c.current.value===a.current.value){e.next=3;break}return e.abrupt("return",b("Passwords do not match"));case 3:return e.prev=3,b(""),v(!0),e.next=8,r(t.current.value,c.current.value);case 8:s=e.sent,u.users.doc(s.user.uid).set({linksCreated:0,totalFileSize:0,lastUploaded:""}),k.push("/home"),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),b("Failed to create an acconut"),v(!1);case 17:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){o&&k.push("/")})),Object(h.jsx)(M.a,{style:{padding:"1.25rem 1.25rem"},children:Object(h.jsxs)("div",{className:"w-100",children:[Object(h.jsx)("h2",{children:"Sign Up"}),j&&Object(h.jsx)(N.a,{variant:"danger",children:j}),Object(h.jsxs)(L.a,{onSubmit:function(e){return S.apply(this,arguments)},children:[Object(h.jsxs)(L.a.Group,{id:"email",children:[Object(h.jsx)(L.a.Label,{children:"Email"}),Object(h.jsx)(L.a.Control,{type:"email",ref:t,required:!0})]}),Object(h.jsxs)(L.a.Group,{id:"password-confirm",children:[Object(h.jsx)(L.a.Label,{children:"Password"}),Object(h.jsx)(L.a.Control,{type:"password",ref:c,required:!0})]}),Object(h.jsxs)(L.a.Group,{id:"password",children:[Object(h.jsx)(L.a.Label,{children:"Confirm Password"}),Object(h.jsx)(L.a.Control,{type:"password",ref:a,required:!0})]}),Object(h.jsx)(y.a,{disabled:x,type:"submit",className:"w-100",children:"Sign Up"})]}),Object(h.jsxs)("div",{className:"w-100 text-center mt-2",children:["Have an account? ",Object(h.jsx)("button",{style:{border:"0"},onClick:function(){return e.login(!0)},children:"Log in"})]})]})})}var P=c(301),U=c(303),V=c.p+"static/media/sample.2e4e5687.mp4",T=c.p+"static/media/sample2.b50c072b.mp4",A=c.p+"static/media/upload.e488b31b.png";function H(e){var t=Object(n.useRef)(),c=Object(n.useRef)(),a=p(),s=a.login,r=a.currentUser,o=Object(n.useState)(""),l=Object(i.a)(o,2),d=l[0],j=l[1],u=Object(n.useState)(!1),b=Object(i.a)(u,2),O=b[0],f=b[1],v=Object(m.g)();function k(){return(k=Object(w.a)(g.a.mark((function e(n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,j(""),f(!0),e.next=6,s(t.current.value,c.current.value);case 6:console.log("Logged in"),v.push("/home",r),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),j("Failed to log in"),f(!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){r&&v.push("/")})),Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(M.a,{style:{padding:"1.25rem 1.25rem"},children:Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Log in"}),d&&Object(h.jsx)(N.a,{variant:"danger",children:d}),Object(h.jsxs)(L.a,{onSubmit:function(e){return k.apply(this,arguments)},children:[Object(h.jsxs)(L.a.Group,{id:"email",children:[Object(h.jsx)(L.a.Label,{children:"Email"}),Object(h.jsx)(L.a.Control,{type:"email",ref:t,required:!0})]}),Object(h.jsxs)(L.a.Group,{id:"password",children:[Object(h.jsx)(L.a.Label,{children:"Password"}),Object(h.jsx)(L.a.Control,{type:"password",ref:c,required:!0})]}),Object(h.jsx)(y.a,{variant:"primary",disabled:O,type:"submit",className:"w-100",children:"Log in"})]}),Object(h.jsx)("div",{children:Object(h.jsx)(x.b,{to:"/forgot-password",children:"Forgot password?"})}),Object(h.jsxs)("div",{className:"w-100 text-center mt-2",children:["Don't have an account? ",Object(h.jsx)("button",{style:{border:"0"},onClick:function(){return e.login(!1)},children:"Sign up"})]})]})})})}var R=c(169),I=c.n(R);c(113);function G(e){var t=Object(m.g)(),c=p().currentUser,a=Object(n.useState)(0),s=Object(i.a)(a,2),r=s[0],o=s[1],l=Object(n.useState)(!0),d=Object(i.a)(l,2),j=d[0],u=d[1];c&&t.push("/home"),Object(n.useEffect)((function(){I.a.init({duration:750,once:!0}),document.getElementById("App").classList.remove("openMargin"),document.getElementById("App").classList.remove("closeMargin")}),[]),console.log("render");return Object(h.jsxs)("div",{className:"bgimage",children:[!c&&Object(h.jsx)("header",{id:"introduction",children:Object(h.jsxs)("div",{className:"container1",children:[Object(h.jsxs)("div",{id:"left-title",children:[Object(h.jsx)("h1",{children:"File sharing"}),Object(h.jsx)("h1",{children:"Made easy."}),Object(h.jsx)("p",{children:"The quickiest and easiest way to share and download files"}),Object(h.jsx)("button",{id:"getStarted",onClick:function(){return t.push("/upload")},children:"Get started"})]}),Object(h.jsx)("div",{id:"right-container",children:Object(h.jsxs)("div",{className:"home-login-card",children:[j&&Object(h.jsx)(H,{login:u}),!j&&Object(h.jsx)(E,{login:u})]})})]})}),Object(h.jsx)("div",{className:"header section-2",children:Object(h.jsxs)("div",{className:"description-header",children:[Object(h.jsxs)("div",{className:"description-header-title","data-aos":"fade-up",children:[Object(h.jsx)("h1",{children:"Select"}),Object(h.jsx)("p",{children:"Choose any files you want to share from your computer"})]}),Object(h.jsx)("div",{className:"icon","data-aos":"fade-up","data-aos-delay":"300",children:Object(h.jsx)("video",{autoPlay:!0,muted:!0,loop:!0,children:Object(h.jsx)("source",{src:V,type:"video/mp4"})})})]})}),Object(h.jsx)("div",{className:"header section-3",children:Object(h.jsxs)("div",{className:"description-header",children:[Object(h.jsx)("div",{className:"icon","data-aos":"fade-up","data-aos-delay":"300",children:Object(h.jsx)("video",{autoPlay:!0,muted:!0,loop:!0,children:Object(h.jsx)("source",{src:T,type:"video/mp4"})})}),Object(h.jsxs)("div",{className:"description-header-title","data-aos":"fade-up",children:[Object(h.jsx)("h1",{children:"Upload"}),Object(h.jsxs)("p",{children:["Add more info such as a description or ",Object(h.jsx)(U.a,{placement:"right",overlay:function(e){return Object(h.jsx)(P.a,Object(B.a)(Object(B.a)({id:"button-tooltip"},e),{},{children:"Sign up or Login to access these features"}))},children:Object(h.jsx)("span",{children:"password"})})]})]})]})}),Object(h.jsx)("div",{className:"header section-4",children:Object(h.jsxs)("div",{className:"description-header right",children:[Object(h.jsxs)("div",{className:"description-header-title ","data-aos":"fade-up",children:[Object(h.jsx)("h1",{children:"Share"}),Object(h.jsx)("p",{children:"Copy and send the link to others for easy access"})]}),Object(h.jsx)("div",{className:"icon","data-aos":"fade-up","data-aos-delay":"300",children:Object(h.jsx)("img",{src:A,alt:"upload.png"})})]})}),Object(h.jsx)("div",{className:"upload-header",children:Object(h.jsx)("button",{className:"start-uploading-button",pressed:r,onClick:function(){o(1),setTimeout((function(){t.push("/upload")}),800)},children:"Start Uploading!"})})]})}var W=c(21),q=c(49),K=c.n(q),Y=c(170);function J(e){return Object(h.jsxs)("div",{className:"file-row-section",children:[Object(h.jsx)("div",{className:"fiv-viv fiv-icon-".concat(e.e.metadata.name.split(".")[1])}),Object(h.jsx)("div",{className:"",children:e.e.metadata.name}),Object(h.jsx)("div",{className:"",children:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var c=1024,n=t<0?0:t,a=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],s=Math.floor(Math.log(e)/Math.log(c));return String(parseFloat((e/Math.pow(c,s)).toFixed(n))+" "+a[s])}(e.e.metadata.size)}),Object(h.jsx)("svg",{title:"download",onClick:function(t){t.preventDefault(),fetch(e.e.fileUrl,{method:"GET"}).then((function(t){t.blob().then((function(t){Object(Y.saveAs)(t,e.e.metadata.name)}))}))},xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",children:Object(h.jsx)("path",{d:"M16 11h5l-9 10-9-10h5v-11h8v11zm1 11h-10v2h10v-2z",children:Object(h.jsx)("title",{children:"Download"})})})]})}var Z=c(171);function _(){var e=window.location.pathname.substring(1),t=Object(n.useState)(),c=Object(i.a)(t,2),a=c[0],s=c[1],r=Object(n.useRef)(),l=p().currentUser,d=Object(m.g)(),b=Object(n.useState)(),O=Object(i.a)(b,2),f=O[0],x=O[1],v=Object(n.useState)([]),C=Object(i.a)(v,2),B=C[0],F=C[1],D=Object(n.useState)(!0),M=Object(i.a)(D,2),z=(M[0],M[1],Object(n.useState)(!0)),E=Object(i.a)(z,2),P=E[0],U=E[1],V=Object(n.useState)(),T=Object(i.a)(V,2),A=T[0],H=T[1],R=Object(n.useState)(""),I=Object(i.a)(R,2),G=I[0],q=I[1],Y=Object(n.useCallback)(Object(w.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.links.doc(e).get().then(function(){var t=Object(w.a)(g.a.mark((function t(c){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!c.exists){t.next=9;break}if(s(c.data().passwordProtected),x(c.data().password),H(c),!l){t.next=7;break}return t.next=7,u.users.doc(l.uid).collection("links").doc(e).update({totalViews:o.a.firestore.FieldValue.increment(1)});case 7:t.next=10;break;case 9:d.push("/");case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:return t.next=4,j.ref().child(window.location.pathname+"/").list().then((function(e){e.items.forEach(function(){var e=Object(w.a)(g.a.mark((function e(t,c){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDownloadURL().then((function(e){return e}));case 2:return e.t0=e.sent,e.next=5,t.getMetadata().then((function(e){return e}));case 5:e.t1=e.sent,e.t2=c,n={fileUrl:e.t0,metadata:e.t1,name:e.t2},F((function(e){return[].concat(Object(W.a)(e),[n]).sort((function(e,t){return e.name>t.name?1:-1}))}));case 9:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}())}));case 4:U(!1);case 5:case"end":return t.stop()}}),t)}))),[l,d,e]);function _(){return(_=Object(w.a)(g.a.mark((function e(t){var c,n,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c=B.map(function(){var e=Object(w.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.fileUrl,{method:"GET"}).then((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=4,Object(Z.a)(c).blob();case 4:n=e.sent,(a=document.createElement("a")).href=URL.createObjectURL(n),a.download=A.data().linkName,a.click(),a.remove();case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){!0===P&&Y()}),[Y,P]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(S,{}),!0===a&&Object(h.jsx)("div",{className:"password_form",children:Object(h.jsxs)(k.a,{children:[Object(h.jsx)(k.a.Header,{children:"Link is password protected"}),Object(h.jsxs)(k.a.Body,{children:[Object(h.jsxs)(L.a,{children:[G&&Object(h.jsx)(N.a,{variant:"danger",children:G}),Object(h.jsx)(L.a.Control,{ref:r,type:"password",placeholder:"Password"})]}),Object(h.jsx)("br",{}),Object(h.jsx)(y.a,{className:"w-100",onClick:function(e){e.preventDefault();var t=K()(r.current.value).toString();console.log("Button submit"),f===t?s(!1):q("Wrong password")},variant:"primary",children:"Enter"})]})]})}),!1===a&&!P&&Object(h.jsxs)("div",{className:"files-page",children:[Object(h.jsxs)("h1",{children:[A.data().linkName," ",Object(h.jsx)(y.a,{onClick:function(e){return _.apply(this,arguments)},title:"Download all files as zip",children:"Download files"})]}),Object(h.jsxs)("div",{className:"files-container",children:[Object(h.jsx)("div",{className:"files-container-header",children:"My files "}),B.map((function(e,t){return Object(h.jsx)(J,{e:e},t)}))]})]})]})}var Q=c(58),X=c.n(Q),$=c(304);function ee(e){var t=Object(n.useRef)(),c=Object(n.useState)(!1),a=Object(i.a)(c,2),s=a[0],r=a[1],o=Object(n.useState)(0),l=Object(i.a)(o,2),d=l[0],j=l[1],b=Object(n.useState)(0),O=Object(i.a)(b,2),f=O[0],x=O[1],m=Object(n.useState)(e.doc.data().numFiles),v=Object(i.a)(m,2),k=v[0],N=(v[1],Object(n.useState)(e.doc.data().passwordProtected)),S=Object(i.a)(N,2),C=S[0],B=S[1],F=Object(n.useRef)(),D=Object(n.useState)(!1),M=Object(i.a)(D,2),z=M[0],E=M[1],P=Object(n.useState)(!1),U=Object(i.a)(P,2),V=U[0],T=U[1],A=p().currentUser;function H(){T(!1)}function R(e){return I.apply(this,arguments)}function I(){return(I=Object(w.a)(g.a.mark((function t(c){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c.preventDefault(),!0!==C){t.next=8;break}return t.next=4,u.users.doc(A.uid).collection("links").doc(e.doc.id).update({passwordProtected:!1,password:0});case 4:return t.next=6,u.links.doc(e.doc.id).update({passwordProtected:!1,password:0});case 6:t.next=13;break;case 8:return n=K()(F.current.value).toString(),t.next=11,u.users.doc(A.uid).collection("links").doc(e.doc.id).update({passwordProtected:!0,password:n});case 11:return t.next=13,u.links.doc(e.doc.id).update({passwordProtected:!0,password:n});case 13:B((function(e){return!e})),H();case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function G(){T(!0)}function q(e){e.preventDefault(),G()}return console.log("render"),Object(n.useEffect)((function(){j(e.selectAllBool)}),[e.selectAllBool]),Object(h.jsxs)("div",{children:[Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)($.a,{show:V,onHide:H,backdrop:"static",keyboard:!1,children:[Object(h.jsx)($.a.Header,{closeButton:!0,children:Object(h.jsx)($.a.Title,{children:"Password"})}),C&&Object(h.jsx)($.a.Body,{children:"Remove your password"}),!C&&Object(h.jsxs)($.a.Body,{children:[Object(h.jsx)("span",{children:"Password:"}),Object(h.jsx)(L.a.Control,{type:z?"text":"password",placeholder:"Enter a password",ref:F}),Object(h.jsx)(L.a.Check,{type:"checkbox",label:"Show password",name:"passwordCheckbox",onClick:function(){return E((function(e){return!e}))}})]}),Object(h.jsxs)($.a.Footer,{children:[Object(h.jsx)(y.a,{variant:"secondary",onClick:H,children:"Close"}),C&&Object(h.jsx)(y.a,{variant:"danger",onClick:R,children:"Remove password"}),!C&&Object(h.jsx)(y.a,{variant:"primary",onClick:R,children:"Set password"})]})]})}),Object(h.jsxs)("div",{className:"files-inner-item files-inner-header",children:[Object(h.jsx)("div",{className:"header-select",children:Object(h.jsx)("div",{ref:t,pressed:d,onClick:function(){return t=e.doc,void(1===d?(j(0),e.select((function(e){return e.filter((function(e){return e!==t.id}))}))):0===d&&(j(1),e.select((function(e){return[].concat(Object(W.a)(e),[t.id])}))));var t},className:"checkbox"})}),Object(h.jsxs)("div",{className:"grid6",onClick:function(e){e.preventDefault(),x(1===f?0:1)},children:[Object(h.jsx)("div",{className:"header-name",children:""===e.doc.data().linkName?e.doc.id:e.doc.data().linkName}),Object(h.jsx)("div",{className:"header-desc",children:""===e.doc.data().description?"-":e.doc.data().description}),Object(h.jsx)("div",{className:"header-date",children:e.doc.data().date}),Object(h.jsx)("div",{className:"header-size",children:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var c=1024,n=t<0?0:t,a=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],s=Math.floor(Math.log(e)/Math.log(c));return String(parseFloat((e/Math.pow(c,s)).toFixed(n))+" "+a[s])}(e.doc.data().size)})]})]}),1===f&&Object(h.jsx)("div",{className:"more-div",more:f,children:Object(h.jsxs)("div",{className:"more-div-left",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Files"}),k]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Views"}),e.doc.data().totalViews]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Password"}),C&&Object(h.jsx)("svg",{className:"svg-locked",onClick:q,viewBox:"-2 -1 28 28",children:Object(h.jsx)("path",{d:"M18 10v-4c0-3.313-2.687-6-6-6s-6 2.687-6 6v4h-3v14h18v-14h-3zm-10-4c0-2.206 1.794-4 4-4s4 1.794 4 4v4h-8v-4zm11 16h-14v-10h14v10z"})}),!1===C&&Object(h.jsx)("svg",{className:"svg-locked",onClick:q,viewBox:"-2 -1 28 28",children:Object(h.jsx)("path",{d:"M8 10v-4c0-2.206 1.795-4 4-4s4 1.794 4 4v1h2v-1c0-3.313-2.687-6-6-6s-6 2.687-6 6v4h-3v14h18v-14h-13zm11 12h-14v-10h14v10z"})})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:s?"Copied!":"Copy"}),Object(h.jsx)("svg",{className:"svg-copy",viewBox:"0 0 20 20",onClick:function(t){t.preventDefault(),r(!0),setTimeout((function(){r(!1)}),5e3),function(e){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style={position:"absolute",left:"-9999px"},document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}("".concat(window.location.hostname,":3000/").concat(e.doc.id))},children:Object(h.jsx)("path",{d:"M17.391,2.406H7.266c-0.232,0-0.422,0.19-0.422,0.422v3.797H3.047c-0.232,0-0.422,0.19-0.422,0.422v10.125c0,0.232,0.19,0.422,0.422,0.422h10.125c0.231,0,0.422-0.189,0.422-0.422v-3.797h3.797c0.232,0,0.422-0.19,0.422-0.422V2.828C17.812,2.596,17.623,2.406,17.391,2.406 M12.749,16.75h-9.28V7.469h3.375v5.484c0,0.231,0.19,0.422,0.422,0.422h5.483V16.75zM16.969,12.531H7.688V3.25h9.281V12.531z"})})]}),Object(h.jsxs)("div",{className:"more-div-right",children:[Object(h.jsx)(X.a,{size:64,value:"".concat(window.location.hostname,"/").concat(e.doc.id)}),Object(h.jsxs)("a",{href:"/".concat(e.doc.id),target:"_blank",rel:"noopener noreferrer",children:[window.location.hostname,"/".concat(e.doc.id)]})]})]})})]})}var te=a.a.memo(ee);function ce(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),c=t[0],a=t[1],s=p().currentUser,r=Object(n.useState)(!0),l=Object(i.a)(r,2),d=l[0],b=l[1],O=Object(n.useState)(!1),f=Object(i.a)(O,2),x=f[0],m=f[1],v=u.users.doc(s.uid).collection("links"),k=Object(n.useState)([]),N=Object(i.a)(k,2),y=N[0],C=N[1],B=Object(n.useState)(0),F=Object(i.a)(B,2),D=F[0],M=F[1],L=Object(n.useState)([0,0,0]),z=Object(i.a)(L,2),E=z[0],P=z[1],U=Object(n.useState)(0),V=Object(i.a)(U,2),T=(V[0],V[1]),A=Object(n.useState)([]),H=Object(i.a)(A,2),R=(H[0],H[1],Object(n.useState)("descending")),I=Object(i.a)(R,2),G=I[0],q=I[1],K=Object(n.useState)("ascending"),Y=Object(i.a)(K,2),J=Y[0],Z=Y[1],_=Object(n.useState)("ascending"),Q=Object(i.a)(_,2),X=Q[0],$=Q[1],ee=Object(n.useState)(!1),ce=Object(i.a)(ee,2),ne=ce[0],ae=ce[1];function se(){return(se=Object(w.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Load File"),e.next=3,v.get().then((function(e){var t=e.docs.sort((function(e,t){return t.data().preciseDate.toDate()-e.data().preciseDate.toDate()}));m(!0),a(Object(W.a)(t))}));case 3:b(!1);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){!0===d&&function(){se.apply(this,arguments)}()}),[]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(S,{}),Object(h.jsxs)("div",{className:"files-page",children:[Object(h.jsx)("h1",{children:"Files"}),Object(h.jsxs)("div",{className:"files-container",children:[Object(h.jsx)("div",{delete:y.length>0?"1":"0",className:"files-container-header",children:"My files"}),y.length>0&&Object(h.jsxs)(h.Fragment,{children:[!ne&&Object(h.jsx)("div",{className:"delete-header",onClick:function(){ae(!0)},children:"Delete"}),ne&&Object(h.jsxs)("div",{className:"d-flex justify-content-center",children:[Object(h.jsx)("div",{className:"cancel-delete-header",onClick:function(){return ae(!1)},children:"Cancel"}),Object(h.jsx)("div",{className:"confirm-delete-header",onClick:function(e){e.preventDefault(),console.log("Deleted"),y.forEach(function(){var e=Object(w.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.doc(t).delete();case 2:return e.next=4,u.links.doc(t).delete();case 4:u.users.doc(s.uid).update({linksCreated:o.a.firestore.FieldValue.increment(-1),totalFileSize:o.a.firestore.FieldValue.increment(-c.filter((function(e){return e.id===t}))[0].data().size)}),j.ref("".concat(t)).list().then((function(e){e.items.forEach((function(e){j.ref(e.fullPath).delete()}))}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a((function(e){return e.filter((function(e){return!y.includes(e.id)}))})),C([])},children:"Confirm delete"})]})]}),Object(h.jsxs)("div",{className:"files-inner-header",children:[Object(h.jsx)("div",{className:"header-select",children:Object(h.jsx)("div",{className:"checkbox",onClick:function(e){e.preventDefault(),0===D?(M(1),C(c.map((function(e){return e.id})))):(M(0),C([]))}})}),Object(h.jsxs)("div",{className:"header-name",onClick:function(e){if(e.preventDefault(),"descending"===J){var t=c.sort((function(e,t){return e.id>t.id?1:-1}));a(Object(W.a)(t)),Z("ascending"),P([1,0,0])}else{var n=c.sort((function(e,t){return e.id>t.id?-1:1}));a(Object(W.a)(n)),Z("descending"),P([0,0,0])}},children:["Name",Object(h.jsx)("svg",{className:"svg-up",orientation:E[0],viewBox:"0 0 20 20",children:Object(h.jsx)("path",{fill:"none",d:"M11.611,10.049l-4.76-4.873c-0.303-0.31-0.297-0.804,0.012-1.105c0.309-0.304,0.803-0.293,1.105,0.012l5.306,5.433c0.304,0.31,0.296,0.805-0.012,1.105L7.83,15.928c-0.152,0.148-0.35,0.223-0.547,0.223c-0.203,0-0.406-0.08-0.559-0.236c-0.303-0.309-0.295-0.803,0.012-1.104L11.611,10.049z"})})]}),Object(h.jsx)("div",{className:"header-desc",children:"Description"}),Object(h.jsxs)("div",{className:"header-date",onClick:function(e){if(e.preventDefault(),"ascending"===G){var t=c.sort((function(e,t){return e.data().preciseDate.toDate()-t.data().preciseDate.toDate()}));a(Object(W.a)(t)),q("descending"),P([0,1,0])}else{var n=c.sort((function(e,t){return t.data().preciseDate.toDate()-e.data().preciseDate.toDate()}));a(Object(W.a)(n)),q("ascending"),P([0,0,0])}},children:["Date Created",Object(h.jsx)("svg",{className:"svg-up",orientation:E[1],viewBox:"0 0 20 20",children:Object(h.jsx)("path",{fill:"none",d:"M11.611,10.049l-4.76-4.873c-0.303-0.31-0.297-0.804,0.012-1.105c0.309-0.304,0.803-0.293,1.105,0.012l5.306,5.433c0.304,0.31,0.296,0.805-0.012,1.105L7.83,15.928c-0.152,0.148-0.35,0.223-0.547,0.223c-0.203,0-0.406-0.08-0.559-0.236c-0.303-0.309-0.295-0.803,0.012-1.104L11.611,10.049z"})})]}),Object(h.jsxs)("div",{className:"header-size",onClick:function(e){if(e.preventDefault(),"ascending"===X){var t=c.sort((function(e,t){return e.data().size-t.data().size}));a(Object(W.a)(t)),$("descending"),P([0,0,1])}else{var n=c.sort((function(e,t){return t.data().size-e.data().size}));a(Object(W.a)(n)),$("ascending"),P([0,0,0])}},children:["Size",Object(h.jsx)("svg",{className:"svg-up",orientation:E[2],viewBox:"0 0 20 20",children:Object(h.jsx)("path",{fill:"none",d:"M11.611,10.049l-4.76-4.873c-0.303-0.31-0.297-0.804,0.012-1.105c0.309-0.304,0.803-0.293,1.105,0.012l5.306,5.433c0.304,0.31,0.296,0.805-0.012,1.105L7.83,15.928c-0.152,0.148-0.35,0.223-0.547,0.223c-0.203,0-0.406-0.08-0.559-0.236c-0.303-0.309-0.295-0.803,0.012-1.104L11.611,10.049z"})})]})]}),Object(h.jsx)("div",{style:{minHeight:"80vh"},children:x&&Object(W.a)(c).map((function(e,t){return Object(h.jsx)(te,{doc:e,select:C,update:T,selectAllBool:D},e.id)}))})]})]})]})}function ne(e){return Object(h.jsx)("div",{className:"footer",children:Object(h.jsxs)("div",{className:"footer-table",children:[Object(h.jsx)("a",{href:"/",children:"Home"}),Object(h.jsx)("a",{href:"/upload",children:"Upload "}),Object(h.jsx)("a",{href:"/contact",children:"Contact"}),Object(h.jsx)("a",{href:"/login",children:"Sign in / Sign up"})]})})}var ae=c(81);function se(){var e=Object(m.h)().pathname;return Object(n.useEffect)((function(){window.scrollTo(0,0)}),[e]),null}function re(){var e=j,t=Object(n.useState)(!1),c=Object(i.a)(t,2),a=c[0],s=c[1],r=Object(n.useState)([]),l=Object(i.a)(r,2),d=l[0],b=l[1],O=Object(n.useRef)("test"),f=Object(n.useRef)(null),x=p().currentUser,m=Object(n.useState)(!1),v=Object(i.a)(m,2),k=v[0],N=v[1],y=Object(n.useState)(0),S=Object(i.a)(y,2),C=S[0],B=S[1],F=Object(n.useState)(1),D=Object(i.a)(F,2),M=D[0],z=D[1],E=Object(n.useState)(0),P=Object(i.a)(E,2),U=P[0],V=P[1],T=Object(n.useRef)(),A=Object(n.useState)(0),H=Object(i.a)(A,2),R=H[0],I=H[1];function G(){return q.apply(this,arguments)}function q(){return(q=Object(w.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(ae.uid)(8),e.next=3,u.links.doc(t).get().then((function(e){return e}));case 3:if(!e.sent.exists){e.next=10;break}return e.next=7,G();case 7:return e.abrupt("return",e.sent);case 10:return B(t),e.abrupt("return",t);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Y=Object(n.useCallback)(function(){var t=Object(w.a)(g.a.mark((function t(c){var n,a,s,r,i;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.preventDefault(),n=[f.current.value,T.current.value,O.current.value],a=n[0],s=n[1],r=n[2],z(4),t.next=5,G();case 5:return i=t.sent,t.next=8,Promise.all(Array.from(d).map(function(){var t=Object(w.a)(g.a.mark((function t(c){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.ref(i).child(c.name),t.next=3,n.put(c,{contentDisposition:"attachment"}).then((function(){var e=new Date,t=e.getUTCMonth()+1+"/"+e.getUTCDate()+"/"+e.getUTCFullYear();u.links.doc(i).set({date:t,preciseDate:o.a.firestore.FieldValue.serverTimestamp(),linkName:a||i,description:s||"",totalViews:0,size:R,numFiles:d.length,fileTypes:d.map((function(e){return e.type})),passwordProtected:!!r,password:r?K()(r).toString():0}),u.users.doc(x.uid).collection("links").doc(i).set({date:t,preciseDate:o.a.firestore.FieldValue.serverTimestamp(),linkName:a||i,description:s||"",totalViews:0,size:R,numFiles:d.length,fileTypes:d.map((function(e){return e.type})),passwordProtected:!!r,password:r?K()(r).toString():0})}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 8:if(!x){t.next=11;break}return t.next=11,u.users.doc(x.uid).update({linksCreated:o.a.firestore.FieldValue.increment(1),totalFileSize:o.a.firestore.FieldValue.increment(R),lastUploaded:i});case 11:N(!0),z(3);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[d,R]);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(se,{}),Object(h.jsxs)("div",{className:"outer-card",children:[1===M&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"files-list",children:Object(h.jsx)("div",{children:Array.from(d).map((function(e,t){return Object(h.jsxs)("div",{children:[Object(h.jsx)("svg",{onClick:function(){return function(e){b((function(t){return t.filter((function(t){return e!==t}))})),I((function(t){return t-e.size}))}(e)},xmlns:"http://www.w3.org/2000/svg",height:"94%",width:"1.5rem",className:"ionicon",viewBox:"35 100 400 400",children:Object(h.jsx)("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M368 368L144 144M368 144L144 368"})}),e.name]},t)}))})}),Object(h.jsxs)("form",{className:"uploadForm",children:[Object(h.jsx)("input",{type:"file",name:"file",id:"file",className:"inputfile",onChange:function(e){var t=e.target.files;I(Object.values(t).reduce((function(e,t){return e+t.size}),0)),b((function(e){var c=new Set;return[].concat(Object(W.a)(e),Object(W.a)(t)).filter((function(e){var t=c.has(e.name);return c.add(e.name),!t}))}))},multiple:!0},U),Object(h.jsx)("label",{className:"uploadButton",htmlFor:"file",children:"Select Files"})]}),Object(h.jsx)("button",{id:"clear-button",onClick:function(){V((function(e){return e+1})),b([]),I(0)},children:"Clear"}),Object(h.jsx)("div",{className:"next-button",onClick:function(){d.length>0&&z(2)},children:"Next"})]}),2===M&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("form",{className:"metadataForm",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("span",{children:"Name: "}),Object(h.jsx)(L.a.Control,{type:"text",placeholder:"Optional",ref:f})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("span",{children:"Password:"}),Object(h.jsx)(L.a.Control,{type:a?"text":"password",placeholder:"Optional",ref:O}),Object(h.jsx)(L.a.Check,{type:"checkbox",label:"Show password",name:"passwordCheckbox",onClick:function(){return s((function(e){return!e}))}})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("span",{children:"Description: "}),Object(h.jsx)(L.a.Control,{type:"text",placeholder:"Optional",ref:T})]})]}),Object(h.jsx)("div",{className:"submitform-button",onClick:Y,children:"Finish Upload"}),Object(h.jsx)("button",{className:"back-button",onClick:function(){return z(1)},children:"Go back"})]}),3===M&&Object(h.jsx)("div",{className:"card-container",children:Object(h.jsxs)("div",{className:"inner-card-container share",children:[k&&Object(h.jsxs)("div",{className:"h-100",children:[Object(h.jsx)("a",{href:"/".concat(C),children:"".concat(window.location.host,"/").concat(C)}),Object(h.jsx)(X.a,{value:"".concat(window.location.host,"/").concat(C)})]}),Object(h.jsx)("button",{onClick:function(e){e.preventDefault(),z(1),b([]),I(0)},children:"Upload more"})]})}),4===M&&Object(h.jsx)("div",{className:"load-container",children:Object(h.jsxs)("div",{className:"lds-facebook",children:[Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{})]})})]})]})}function ie(){var e=p().currentUser,t=Object(n.useState)(!0),c=Object(i.a)(t,2),a=c[0],s=c[1],r=Object(n.useState)(0),o=Object(i.a)(r,2),l=o[0],d=o[1],j=Object(n.useState)(0),b=Object(i.a)(j,2),O=b[0],f=b[1],x=Object(n.useState)(0),m=Object(i.a)(x,2),v=m[0],k=m[1],N=Object(n.useState)(0),y=Object(i.a)(N,2),C=y[0],B=y[1];Object(n.useEffect)((function(){!0===a&&F(),u.users.doc(e.uid).onSnapshot((function(e){e&&(d(e.data().totalFileSize),f(e.data().linksCreated),k(e.data().lastUploaded))}))}),[]);var F=function(){var t=Object(w.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:u.users.doc(e.uid).collection("links").get().then((function(e){B(e.docs.reduce((function(e,t){return e+t.data().totalViews}),0))})),s(!1);case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(S,{}),Object(h.jsxs)("div",{className:"home-page",children:[Object(h.jsx)("h1",{children:e.email}),Object(h.jsxs)("div",{className:"nav-panel",children:[Object(h.jsxs)("div",{className:"nav-panel-item",children:[Object(h.jsx)("div",{className:"nav-panel-item-header",children:"Links Created"}),Object(h.jsx)("span",{children:O})]}),Object(h.jsxs)("div",{className:"nav-panel-item",children:[Object(h.jsx)("div",{className:"nav-panel-item-header",children:"Storage"}),Object(h.jsx)("span",{children:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var c=1024,n=t<0?0:t,a=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],s=Math.floor(Math.log(e)/Math.log(c));return String(parseFloat((e/Math.pow(c,s)).toFixed(n))+" "+a[s])}(l)})]}),Object(h.jsxs)("div",{className:"nav-panel-item",children:[Object(h.jsx)("div",{className:"nav-panel-item-header",children:"Views"}),Object(h.jsx)("span",{children:C})]}),Object(h.jsxs)("div",{className:"nav-panel-item",children:[Object(h.jsx)("div",{className:"nav-panel-item-header",children:"Last uploaded"}),Object(h.jsx)("span",{children:v})]})]}),Object(h.jsx)("div",{className:"nav-panel-big-card",children:Object(h.jsxs)("div",{className:"nav-panel-upload-card",id:"upload-card",children:[Object(h.jsx)("div",{className:"nav-panel-item-header",children:"Upload"}),Object(h.jsx)(re,{})]})})]})]})}function oe(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(S,{}),Object(h.jsx)("div",{children:"Contact information"})]})}var le=c(302);function de(){var e=j,t=Object(m.g)(),c=Object(n.useState)(!1),a=Object(i.a)(c,2),s=a[0],r=a[1],l=Object(n.useState)([]),d=Object(i.a)(l,2),b=d[0],O=d[1],p=Object(n.useState)(!1),f=Object(i.a)(p,2),x=f[0],v=f[1],k=Object(n.useState)(0),N=Object(i.a)(k,2),S=N[0],C=N[1],B=Object(n.useState)(!1),F=Object(i.a)(B,2),D=F[0],M=F[1],L=Object(n.useState)(1),z=Object(i.a)(L,2),E=z[0],P=z[1],U=Object(n.useState)(0),V=Object(i.a)(U,2),T=V[0],A=V[1];function H(){return R.apply(this,arguments)}function R(){return(R=Object(w.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(ae.uid)(8),e.next=3,u.links.doc(t).get().then((function(e){return e}));case 3:if(!e.sent.exists){e.next=10;break}return e.next=7,H();case 7:return e.abrupt("return",e.sent);case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return(I=Object(w.a)(g.a.mark((function t(c){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c.preventDefault(),!(b.length>0)){t.next=14;break}return M(!0),P(0),t.next=6,H();case 6:return n=t.sent,C(n),t.next=10,Promise.all(Array.from(b).map(function(){var t=Object(w.a)(g.a.mark((function t(c){var a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.ref(n).child(c.name),t.next=3,a.put(c,{contentDisposition:"attachment"}).then((function(){var e=new Date,t=e.getUTCMonth()+1+"/"+e.getUTCDate()+"/"+e.getUTCFullYear();u.links.doc(n).set({date:t,preciseDate:o.a.firestore.FieldValue.serverTimestamp(),linkName:n,description:"",totalViews:0,size:T,numFiles:b.length,fileTypes:b.map((function(e){return e.type})),passwordProtected:!1,password:0})}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 10:v(!0),P(3),O([]),M(!1);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(se,{}),Object(h.jsxs)(le.a,{style:{padding:"3rem 2rem"},children:[Object(h.jsx)("h1",{children:"Want more features?"}),Object(h.jsxs)("p",{children:["Sign up to access additional features, such as",Object(h.jsx)("br",{}),"- Custom name and descriptions",Object(h.jsx)("br",{}),"- Password protected links",Object(h.jsx)("br",{}),"- Multiple file uploads"]}),Object(h.jsx)("p",{children:Object(h.jsx)(y.a,{onClick:function(){return t.push("/")},variant:"primary",children:"Sign up"})})]}),Object(h.jsxs)("div",{className:"restricted-upload-page",children:[E>0&&b.length>0&&b[0].name,1===E&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("form",{children:[Object(h.jsx)("input",{type:"file",name:"file",id:"file",className:"inputfile",onChange:function(e){var t=e.target.files;A(Object.values(t).reduce((function(e,t){return e+t.size}),0)),O((function(e){var c=new Set;return[].concat(Object(W.a)(e),Object(W.a)(t)).filter((function(e){var t=c.has(e.name);return c.add(e.name),!t}))})),r(!0)}}),Object(h.jsx)("label",{htmlFor:"file",className:"select-files",children:"Select files"})]}),Object(h.jsx)(y.a,{variant:"dark",onClick:function(e){return I.apply(this,arguments)},disabled:!s||"",children:"Upload"})]}),D&&Object(h.jsxs)("div",{class:"lds-ring",children:[Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{})]}),3===E&&Object(h.jsxs)("div",{className:"restricted-share",children:[x&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(X.a,{value:"".concat(window.location.host,"/").concat(S)}),Object(h.jsx)("a",{href:"/".concat(S),children:"".concat(window.location.host,"/").concat(S)})]}),Object(h.jsx)(y.a,{variant:"dark",onClick:function(e){e.preventDefault(),P(1),O([]),A(0)},children:"Upload more"})]})]})]})}function je(){return Object(h.jsxs)("div",{id:"App",style:{position:"relative"},children:[Object(h.jsx)("div",{className:"App",children:Object(h.jsx)(x.a,{children:Object(h.jsx)(f,{children:Object(h.jsxs)(m.d,{children:[Object(h.jsx)(m.b,{exact:!0,path:"/",children:Object(h.jsx)(G,{})}),Object(h.jsx)(m.b,{path:"/forgot-password",component:z}),Object(h.jsx)(m.b,{path:"/upload",component:de}),Object(h.jsx)(D,{path:"/home",component:ie}),Object(h.jsx)(D,{path:"/files",component:ce}),Object(h.jsx)(D,{path:"/settings",component:C}),Object(h.jsx)(D,{path:"/contact",component:oe}),Object(h.jsx)(m.b,{path:"/",component:_})]})})})}),Object(h.jsx)(ne,{})]})}var ue=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,307)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;c(e),n(e),a(e),s(e),r(e)}))};c(290);r.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(je,{})}),document.getElementById("root")),ue()},61:function(e,t,c){}},[[291,1,2]]]);
//# sourceMappingURL=main.24148703.chunk.js.map